{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import Admin from'./Admin';// Add this line\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function App(){const[showAdmin,setShowAdmin]=useState(false);const[opportunities,setOpportunities]=useState([]);const[selectedOpportunity,setSelectedOpportunity]=useState(null);const[formData,setFormData]=useState({applicantName:'',applicantEmail:''});const[appliedOpportunities,setAppliedOpportunities]=useState([]);useEffect(()=>{fetchOpportunities();loadAppliedOpportunities();},[]);const fetchOpportunities=async()=>{const res=await axios.get('http://localhost:5000/opportunities');setOpportunities(res.data);};const loadAppliedOpportunities=()=>{const applied=JSON.parse(localStorage.getItem('appliedOpportunities'))||[];setAppliedOpportunities(applied);};const handleApply=async e=>{e.preventDefault();try{await axios.post('http://localhost:5000/apply',{...formData,opportunityId:selectedOpportunity._id});alert('Application submitted successfully!');setSelectedOpportunity(null);setFormData({applicantName:'',applicantEmail:''});// Save this opportunity ID as applied\nconst updatedApplied=[...appliedOpportunities,selectedOpportunity._id];setAppliedOpportunities(updatedApplied);localStorage.setItem('appliedOpportunities',JSON.stringify(updatedApplied));}catch(error){if(error.response&&error.response.status===400){alert(error.response.data.message);}else{alert('Something went wrong. Please try again.');}}};const hasApplied=opportunityId=>{return appliedOpportunities.includes(opportunityId);};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAdmin(!showAdmin),style:{marginBottom:'20px'},children:showAdmin?'ðŸ”™ Back to Opportunities':'ðŸ›  Go to Admin Panel'}),showAdmin?/*#__PURE__*/_jsx(Admin,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Volunteering Opportunities\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchOpportunities,style:{marginBottom:'20px'},children:\"\\uD83D\\uDD04 Refresh Opportunities\"}),/*#__PURE__*/_jsx(\"ul\",{children:opportunities.map(opp=>/*#__PURE__*/_jsxs(\"li\",{style:{marginBottom:'20px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:opp.title}),/*#__PURE__*/_jsx(\"p\",{children:opp.description}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Duration:\"}),\" \",opp.duration]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Location:\"}),\" \",opp.location]}),hasApplied(opp._id)?/*#__PURE__*/_jsx(\"button\",{disabled:true,style:{backgroundColor:'#ccc',cursor:'not-allowed'},children:\"\\u2705 Already Applied\"}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedOpportunity(opp),children:\"Apply\"})]},opp._id))}),selectedOpportunity&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'30px'},children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Apply for \",selectedOpportunity.title]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleApply,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Your Name\",value:formData.applicantName,onChange:e=>setFormData({...formData,applicantName:e.target.value}),required:true})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Your Email\",value:formData.applicantEmail,onChange:e=>setFormData({...formData,applicantEmail:e.target.value}),required:true})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit Application\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setSelectedOpportunity(null),children:\"Cancel\"})]})]})]})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","axios","Admin","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","showAdmin","setShowAdmin","opportunities","setOpportunities","selectedOpportunity","setSelectedOpportunity","formData","setFormData","applicantName","applicantEmail","appliedOpportunities","setAppliedOpportunities","fetchOpportunities","loadAppliedOpportunities","res","get","data","applied","JSON","parse","localStorage","getItem","handleApply","e","preventDefault","post","opportunityId","_id","alert","updatedApplied","setItem","stringify","error","response","status","message","hasApplied","includes","style","padding","children","onClick","marginBottom","map","opp","title","description","duration","location","disabled","backgroundColor","cursor","marginTop","onSubmit","type","placeholder","value","onChange","target","required"],"sources":["/Users/johansenmwesigwa/Downloads/dev/WebApp/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport Admin from './Admin'; // Add this line\n\nfunction App() {\n    const [showAdmin, setShowAdmin] = useState(false);\n    const [opportunities, setOpportunities] = useState([]);\n    const [selectedOpportunity, setSelectedOpportunity] = useState(null);\n    const [formData, setFormData] = useState({ applicantName: '', applicantEmail: '' });\n    const [appliedOpportunities, setAppliedOpportunities] = useState([]);\n\n  useEffect(() => {\n    fetchOpportunities();\n    loadAppliedOpportunities();\n  }, []);\n\n  const fetchOpportunities = async () => {\n    const res = await axios.get('http://localhost:5000/opportunities');\n    setOpportunities(res.data);\n  };\n\n  const loadAppliedOpportunities = () => {\n    const applied = JSON.parse(localStorage.getItem('appliedOpportunities')) || [];\n    setAppliedOpportunities(applied);\n  };\n\n  const handleApply = async (e) => {\n    e.preventDefault();\n    try {\n      await axios.post('http://localhost:5000/apply', {\n        ...formData,\n        opportunityId: selectedOpportunity._id,\n      });\n\n      alert('Application submitted successfully!');\n      setSelectedOpportunity(null);\n      setFormData({ applicantName: '', applicantEmail: '' });\n\n      // Save this opportunity ID as applied\n      const updatedApplied = [...appliedOpportunities, selectedOpportunity._id];\n      setAppliedOpportunities(updatedApplied);\n      localStorage.setItem('appliedOpportunities', JSON.stringify(updatedApplied));\n    } catch (error) {\n      if (error.response && error.response.status === 400) {\n        alert(error.response.data.message);\n      } else {\n        alert('Something went wrong. Please try again.');\n      }\n    }\n  };\n\n  const hasApplied = (opportunityId) => {\n    return appliedOpportunities.includes(opportunityId);\n  };\n\n  return (\n    <div style={{ padding: '20px' }}>\n      {/* NEW BUTTON to switch between Admin and Public */}\n      <button onClick={() => setShowAdmin(!showAdmin)} style={{ marginBottom: '20px' }}>\n        {showAdmin ? 'ðŸ”™ Back to Opportunities' : 'ðŸ›  Go to Admin Panel'}\n      </button>\n  \n      {/* If Admin is ON, show Admin Page */}\n      {showAdmin ? (\n        <Admin />\n      ) : (\n        <>\n          {/* Public view â€” existing content */}\n          <h1>Volunteering Opportunities</h1>\n          <button onClick={fetchOpportunities} style={{ marginBottom: '20px' }}>\n            ðŸ”„ Refresh Opportunities\n          </button>\n  \n          <ul>\n            {opportunities.map((opp) => (\n              <li key={opp._id} style={{ marginBottom: '20px' }}>\n                <h2>{opp.title}</h2>\n                <p>{opp.description}</p>\n                <p><strong>Duration:</strong> {opp.duration}</p>\n                <p><strong>Location:</strong> {opp.location}</p>\n  \n                {hasApplied(opp._id) ? (\n                  <button disabled style={{ backgroundColor: '#ccc', cursor: 'not-allowed' }}>\n                    âœ… Already Applied\n                  </button>\n                ) : (\n                  <button onClick={() => setSelectedOpportunity(opp)}>\n                    Apply\n                  </button>\n                )}\n              </li>\n            ))}\n          </ul>\n  \n          {selectedOpportunity && (\n            <div style={{ marginTop: '30px' }}>\n              <h2>Apply for {selectedOpportunity.title}</h2>\n              <form onSubmit={handleApply}>\n                <div>\n                  <input\n                    type=\"text\"\n                    placeholder=\"Your Name\"\n                    value={formData.applicantName}\n                    onChange={(e) => setFormData({ ...formData, applicantName: e.target.value })}\n                    required\n                  />\n                </div>\n                <div>\n                  <input\n                    type=\"email\"\n                    placeholder=\"Your Email\"\n                    value={formData.applicantEmail}\n                    onChange={(e) => setFormData({ ...formData, applicantEmail: e.target.value })}\n                    required\n                  />\n                </div>\n                <button type=\"submit\">Submit Application</button>\n                <button type=\"button\" onClick={() => setSelectedOpportunity(null)}>Cancel</button>\n              </form>\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}